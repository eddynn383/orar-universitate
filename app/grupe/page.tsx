"use server"

import { Suspense } from "react"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/Card"
import { H1, H2, P } from "@/components/Typography"
import { getAllGroups } from "@/data/group"
import { Empty, EmptyContent, EmptyDescription, EmptyHeader, EmptyMedia, EmptyTitle } from "@/components/Empty"
import { CardActions } from "./_components/CardActions"
import { SearchInput } from "./_components/Search"
import { CreateGroupModal } from "./_components/CreateGroupModal"
import { getAllLearningTypes } from "@/data/learningType"
import { Button } from "@/components/Button"
import { CirclePlus } from "lucide-react"
import { Spinner } from "@/components/Spinner"
import { AdminOnlyServer } from "@/components/RoleGateServer"

type GroupsPageProps = {
    searchParams: Promise<{ search?: string }>
}

export default async function GroupsPage({ searchParams }: GroupsPageProps) {
    const groups = await getAllGroups()
    const learningTypes = await getAllLearningTypes()

    console.log("groups: ", groups)

    const params = await searchParams

    // Filter groups based on search query
    const searchQuery = params.search?.toLowerCase() || ""
    const filteredGroups = groups.filter((group) => {
        if (!searchQuery) return true

        const name = group.name.toLowerCase()

        return (
            name.includes(searchQuery)
        )
    })

    return (
        <div className="content grid grid-rows-[auto_1fr] h-full overflow-hidden">
            <div className="flex flex-col items-center border-b bg-primary-200 border-primary-300 padding-l p-6">
                <div className="flex flex-col md:flex-row gap-4 justify-between items-start md:items-end w-full max-w-7xl">
                    <div className="flex flex-col gap-2 w-full md:w-auto">
                        <H1 className="text-left text-2xl">Grupe</H1>
                        <P className="text-base [&:not(:first-child)]:mt-0">Gestionează grupele scolare din platformă</P>
                    </div>
                    <div className="flex justify-start items-end gap-4 flex-1 w-full md:w-auto md:justify-end">
                        <SearchInput />
                    </div>
                </div>
            </div>
            <div className="flex flex-col items-center border-b border-primary-200 padding-l py-8 px-6 overflow-y-auto">
                <div className="flex flex-col gap-1 w-full max-w-7xl h-full">
                    <div className="flex flex-col gap-8 w-full">
                        <Suspense fallback={"Loading..."}>
                            {filteredGroups.length === 0 && searchQuery ? (
                                <Empty>
                                    <EmptyHeader>
                                        <EmptyMedia variant="default">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="400" height="285" viewBox="0 0 748.974 457.275" role="img">
                                                <g id="Group_201" data-name="Group 201" transform="translate(-382.003 -195.455)">
                                                    <g id="Group_200" data-name="Group 200" transform="translate(382.003 195.455)">
                                                        <path id="Path_3120-90" data-name="Path 3120" d="M695.225,508.82,433.394,576.244a34.622,34.622,0,0,1-42.114-24.866L312.1,243.879a34.622,34.622,0,0,1,24.866-42.114l243.591-62.727L642.9,166.948l77.191,299.757A34.622,34.622,0,0,1,695.225,508.82Z" transform="translate(-311.003 -139.037)" fill="var(--primary-background-200, #f5f6f8)" />
                                                        <path id="Path_3121-91" data-name="Path 3121" d="M338.989,210.925a24.655,24.655,0,0,0-17.708,29.99l79.185,307.5a24.655,24.655,0,0,0,29.99,17.708L692.287,498.7a24.655,24.655,0,0,0,17.708-29.99L634,173.595l-54.792-24.529Z" transform="translate(-310.548 -138.556)" fill="transparent" />
                                                        <path id="Path_3122-92" data-name="Path 3122" d="M629.927,168.5l-40.522,10.435a11.518,11.518,0,0,1-14.026-8.282l-7.707-29.929a.72.72,0,0,1,.989-.837l61.379,27.258a.72.72,0,0,1-.113,1.355Z" transform="translate(-298.695 -139)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_3123-93" data-name="Path 3123" d="M612.519,418.284l-119.208,30.7a5.759,5.759,0,0,1-2.872-11.154l119.208-30.7a5.759,5.759,0,1,1,2.872,11.154Z" transform="translate(-302.605 -126.189)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_3124-94" data-name="Path 3124" d="M640.149,430.592,497.936,467.214a5.759,5.759,0,1,1-2.872-11.154l142.213-36.622a5.759,5.759,0,0,1,2.872,11.154Z" transform="translate(-302.384 -125.599)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <circle id="Ellipse_44" data-name="Ellipse 44" cx="20.355" cy="20.355" r="20.355" transform="translate(121.697 319.055)" fill="var(--accent-brand-400, #5752ff)" />
                                                        <path id="Path_3125-95" data-name="Path 3125" d="M604.421,374.437,446.1,415.191a17.835,17.835,0,0,1-21.694-12.812L391.229,273.49A17.835,17.835,0,0,1,404.041,251.8l158.32-40.754a17.835,17.835,0,0,1,21.694,12.812l33.178,128.889A17.835,17.835,0,0,1,604.421,374.437Z" transform="translate(-307.183 -135.611)" fill="transparent" />
                                                        <path id="Path_3126-96" data-name="Path 3126" d="M604.421,374.437,446.1,415.191a17.835,17.835,0,0,1-21.694-12.812L391.229,273.49A17.835,17.835,0,0,1,404.041,251.8l158.32-40.754a17.835,17.835,0,0,1,21.694,12.812l33.178,128.889A17.835,17.835,0,0,1,604.421,374.437ZM404.563,253.826a15.737,15.737,0,0,0-11.3,19.142l33.178,128.889a15.737,15.737,0,0,0,19.142,11.3L603.9,372.407a15.737,15.737,0,0,0,11.3-19.142L582.025,224.376a15.737,15.737,0,0,0-19.142-11.3Z" transform="translate(-307.183 -135.611)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_411-97" data-name="Path 411" d="M550.66,252.63l-79.9,20.568a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l81.335-20.937c3.286,1.665,2.421,5.07.091,5.67Z" transform="translate(-303.514 -133.861)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_412-98" data-name="Path 412" d="M554.1,266l-79.9,20.568a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l81.335-20.937c3.286,1.665,2.421,5.07.091,5.67Z" transform="translate(-303.349 -133.22)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_413-99" data-name="Path 413" d="M461.146,298.825,436.761,305.1a3.1,3.1,0,0,1-3.776-2.23L425.577,274.1a3.1,3.1,0,0,1,2.23-3.776l24.385-6.277a3.105,3.105,0,0,1,3.776,2.23l7.408,28.777a3.1,3.1,0,0,1-2.23,3.776Z" transform="translate(-305.513 -133.047)" fill="var(--accent-brand-400, #5752ff)" />
                                                        <path id="Path_414-100" data-name="Path 414" d="M562.854,293.445,440.909,324.835a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l123.38-31.76c3.286,1.665,2.421,5.07.091,5.67Z" transform="translate(-304.946 -131.904)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_415-101" data-name="Path 415" d="M566.3,306.822,444.353,338.213a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l123.38-31.76c3.286,1.665,2.421,5.07.091,5.67Z" transform="translate(-304.781 -131.263)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_416-102" data-name="Path 416" d="M569.739,320.192,447.794,351.582a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l123.379-31.76c3.286,1.665,2.421,5.07.091,5.67Z" transform="translate(-304.616 -130.621)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_417-103" data-name="Path 417" d="M573.183,333.569,451.237,364.959a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l123.38-31.76C576.377,329.564,575.513,332.969,573.183,333.569Z" transform="translate(-304.45 -129.98)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_418-104" data-name="Path 418" d="M576.624,346.939,454.679,378.329a2.862,2.862,0,0,1-3.467-1.8,2.757,2.757,0,0,1,1.942-3.5l123.38-31.76C579.819,342.934,578.954,346.339,576.624,346.939Z" transform="translate(-304.285 -129.339)" fill="var(--primary-background-300, #e3e5e8)" />
                                                        <path id="Path_395-105" data-name="Path 395" d="M448.363,470.511a2.111,2.111,0,0,1-1.335-.092l-.026-.011-5.545-2.351a2.126,2.126,0,1,1,1.664-3.913l3.593,1.528,4.708-11.076a2.125,2.125,0,0,1,2.787-1.124h0l-.028.072.029-.073a2.127,2.127,0,0,1,1.124,2.788l-5.539,13.023a2.126,2.126,0,0,1-1.431,1.224Z" transform="translate(-304.809 -123.966)" fill="transparent" />
                                                    </g>
                                                    <g id="Group_199" data-name="Group 199" transform="translate(673.007 225.872) rotate(-8)">
                                                        <g id="Group_198" data-name="Group 198" transform="translate(125.896 0) rotate(19)">
                                                            <path id="Path_3127-106" data-name="Path 3127" d="M304.956,386.7H34.583A34.622,34.622,0,0,1,0,352.114V34.583A34.622,34.622,0,0,1,34.583,0H286.121l53.418,42.577V352.114A34.622,34.622,0,0,1,304.956,386.7Z" transform="translate(0 0)" fill="var(--primary-background-300, #e3e5e8)" />
                                                            <path id="Path_3128-107" data-name="Path 3128" d="M24.627,0A24.655,24.655,0,0,0,0,24.627V342.158a24.655,24.655,0,0,0,24.627,24.627H295a24.655,24.655,0,0,0,24.627-24.627V37.418L272.683,0Z" transform="translate(9.956 9.956)" fill="transparent" />
                                                            <path id="Path_3129-108" data-name="Path 3129" d="M128.856,11.518H5.759A5.759,5.759,0,0,1,5.759,0h123.1a5.759,5.759,0,0,1,0,11.518Z" transform="translate(123.512 90.767)" fill="var(--accent-brand-400, #5752ff)" />
                                                            <path id="Path_3130-109" data-name="Path 3130" d="M152.612,11.518H5.759A5.759,5.759,0,0,1,5.759,0H152.612a5.759,5.759,0,1,1,0,11.518Z" transform="translate(123.512 110.204)" fill="var(--accent-brand-400, #5752ff)" />
                                                            <path id="Path_3131-110" data-name="Path 3131" d="M128.852,0H5.758a5.758,5.758,0,1,0,0,11.517H128.852a5.759,5.759,0,0,0,0-11.517Z" transform="translate(123.517 177.868)" fill="var(--primary-background-400, #d5d7dd)" />
                                                            <path id="Path_3132-111" data-name="Path 3132" d="M152.609,0H5.758a5.759,5.759,0,1,0,0,11.517h146.85a5.759,5.759,0,1,0,0-11.517Z" transform="translate(123.517 197.307)" fill="var(--primary-background-400, #d5d7dd)" />
                                                            <path id="Path_3133-112" data-name="Path 3133" d="M128.856,11.518H5.759A5.759,5.759,0,0,1,5.759,0h123.1a5.759,5.759,0,0,1,0,11.518Z" transform="translate(123.512 264.975)" fill="var(--primary-background-400, #d5d7dd)" />
                                                            <path id="Path_3134-113" data-name="Path 3134" d="M152.612,11.518H5.759A5.759,5.759,0,0,1,5.759,0H152.612a5.759,5.759,0,1,1,0,11.518Z" transform="translate(123.512 284.411)" fill="var(--primary-background-400, #d5d7dd)" />
                                                            <circle id="Ellipse_44-2" data-name="Ellipse 44" cx="20.355" cy="20.355" r="20.355" transform="translate(57.655 85.89)" fill="var(--accent-brand-400, #5752ff)" />
                                                            <path id="Path_395-2-114" data-name="Path 395" d="M6.909,15.481a2.111,2.111,0,0,1-1.27-.422l-.023-.017L.832,11.382A2.126,2.126,0,0,1,3.419,8.008l3.1,2.376L13.839.832A2.125,2.125,0,0,1,16.819.439h0L16.774.5l.047-.063a2.127,2.127,0,0,1,.393,2.98L8.6,14.649a2.126,2.126,0,0,1-1.691.829Z" transform="translate(69.085 98.528)" fill="transparent" />
                                                            <path id="Path_3135-115" data-name="Path 3135" d="M40.707,20.359A20.354,20.354,0,0,1,20.356,40.721a4.372,4.372,0,0,1-.524-.021A20.353,20.353,0,1,1,40.707,20.359Z" transform="translate(59.75 172.987)" fill="var(--accent-brand-400, #5752ff)" />
                                                            <circle id="Ellipse_44-3" data-name="Ellipse 44" cx="20.355" cy="20.355" r="20.355" transform="translate(57.655 260.097)" fill="var(--accent-brand-400, #5752ff)" />
                                                            <path id="Path_3136-116" data-name="Path 3136" d="M53.362,43.143H11.518A11.518,11.518,0,0,1,0,31.625V.72A.72.72,0,0,1,1.167.156l52.642,41.7a.72.72,0,0,1-.447,1.284Z" transform="translate(285.137 0.805)" fill="var(--primary-background-400, #d5d7dd)" />
                                                        </g>
                                                    </g>
                                                    <path id="Path_3140-117" data-name="Path 3140" d="M754.518,518.049a9.158,9.158,0,0,1-12.587,3.05L635.078,455.923a9.158,9.158,0,0,1,9.538-15.637l106.852,65.176a9.158,9.158,0,0,1,3.049,12.587Z" transform="translate(123.58 101.359)" fill="var(--primary-background-400, #d5d7dd)" />
                                                    <path id="Path_3141-118" data-name="Path 3141" d="M688.648,486.5a73.265,73.265,0,1,1-24.4-100.7A73.265,73.265,0,0,1,688.648,486.5ZM579.19,419.73a54.949,54.949,0,1,0,75.524-18.3,54.949,54.949,0,0,0-75.524,18.3Z" transform="translate(82.597 67.737)" fill="var(--primary-background-400, #d5d7dd)" />
                                                    <circle id="Ellipse_44-4" data-name="Ellipse 44" cx="57.007" cy="57.007" r="57.007" transform="translate(672.542 442.858) rotate(19)" fill="var(--accent-brand-400, #5752ff)" />
                                                </g>
                                            </svg>
                                        </EmptyMedia>
                                    </EmptyHeader>
                                    <EmptyContent>
                                        <EmptyTitle>Nici-un rezultat</EmptyTitle>
                                        <EmptyDescription>Nu au fost găsite cadre didactice care să corespundă criteriilor "{searchQuery}"</EmptyDescription>
                                    </EmptyContent>
                                </Empty>
                            ) : (
                                <>
                                    {
                                        filteredGroups.length === 0 ? (
                                            <Empty>
                                                <EmptyHeader>
                                                    <EmptyMedia variant="default">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 550.71039 567.98584">
                                                            <path d="M711.24677,733.99292H560.52137a6.616,6.616,0,0,1-6.60858-6.60839V622.00475a6.616,6.616,0,0,1,6.60858-6.60858h150.7254a6.616,6.616,0,0,1,6.60839,6.60858V727.38453A6.6161,6.6161,0,0,1,711.24677,733.99292Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #f2f2f2)" />
                                                            <path d="M464.93162,459.293a11.22645,11.22645,0,0,0-3.595-16.83486l-.94985-100.813-18.84219,8.64691,4.1444,97.50067A11.2873,11.2873,0,0,0,464.93162,459.293Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M464.42409,316.12137s-18.32929-8.89112-20.86418,7.88369-12.96145,60.43336-12.96145,60.43336l31.63926-2.23768Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M464.93162,459.293a11.22645,11.22645,0,0,0-3.595-16.83486l-.94985-100.813-18.84219,8.64691,4.1444,97.50067A11.2873,11.2873,0,0,0,464.93162,459.293Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M464.42409,316.12137s-18.32929-8.89112-20.86418,7.88369-12.96145,60.43336-12.96145,60.43336l31.63926-2.23768Z" transform="translate(-324.64481 -166.00708)" fill="var(--accent-brand-400, #6c63ff)" />
                                                            <path d="M411.35263,704.46626a3.61323,3.61323,0,0,1-2.61865-6.26262c.09111-.36213.15647-.62217.24758-.9843q-.0489-.11821-.09837-.23628a9.70311,9.70311,0,0,0-17.89849.06652c-2.92739,7.05051-6.65447,14.11307-7.57216,21.5678a28.7054,28.7054,0,0,0,.5039,9.87234,115.08614,115.08614,0,0,1-10.46893-47.79893,111.07991,111.07991,0,0,1,.689-12.392q.5708-5.05966,1.58377-10.0473a116.4192,116.4192,0,0,1,23.087-49.34152,30.9826,30.9826,0,0,0,12.88556-13.36893,23.6336,23.6336,0,0,0,2.14933-6.45821c-.62729.08228-1.26489.13369-1.89217.17479-.19543.01023-.40108.02055-.59651.03087l-.07369.0033a3.57989,3.57989,0,0,1-2.9401-5.83225q.40627-.5.81305-.99948c.4114-.51423.833-1.01814,1.24434-1.53228a1.7836,1.7836,0,0,0,.13369-.15432c.47313-.58619.94609-1.16206,1.41922-1.74825a10.35176,10.35176,0,0,0-3.39367-3.28044c-4.74083-2.77661-11.28133-.85358-14.70586,3.43476-3.43476,4.28826-4.0826,10.30438-2.88976,15.66218a41.48513,41.48513,0,0,0,5.73842,12.793c-.25715.32912-.52454.64792-.78161.977a117.17121,117.17121,0,0,0-12.22973,19.37481,48.70929,48.70929,0,0,0-2.908-22.62447c-2.78346-6.71479-8.00064-12.37-12.595-18.17495-5.51857-6.97261-16.83488-3.9296-17.80713,4.90927q-.01412.12837-.02757.25665,1.02363.57749,2.004,1.22586a4.9011,4.9011,0,0,1-1.976,8.91908l-.09994.01543a48.7668,48.7668,0,0,0,1.28544,7.29124A50.20988,50.20988,0,0,0,376.56347,641.273c.40108.20565.79193.41131,1.193.60673a119.598,119.598,0,0,0-6.43767,30.296,113.43525,113.43525,0,0,0,.08228,18.31542l-.03086-.216a29.97408,29.97408,0,0,0-10.23241-17.3076c-7.87438-6.46853-18.9994-8.8505-27.49446-14.04994a5.62528,5.62528,0,0,0-8.61571,5.47252q.01709.11352.03474.227a32.92633,32.92633,0,0,1,3.69184,1.779q1.02362.57761,2.004,1.22585a4.90116,4.90116,0,0,1-1.976,8.91917l-.1.01535c-.072.01031-.13369.02063-.20557.03094a48.80758,48.80758,0,0,0,8.97767,14.05786A50.25446,50.25446,0,0,0,373.9,706.63672h.01032a119.56344,119.56344,0,0,0,8.03167,23.447h28.69167c.10291-.3188.19542-.64792.288-.96672a32.59925,32.59925,0,0,1-7.93916-.473c2.12878-2.61214,4.25747-5.24483,6.38625-7.85688a1.78139,1.78139,0,0,0,.1337-.15424c1.07978-1.33685,2.16987-2.66347,3.24965-4.00032l.00058-.00165a47.75027,47.75027,0,0,0-1.39916-12.16412Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #f2f2f2)" />
                                                            <path d="M834.35263,704.46626a3.61323,3.61323,0,0,1-2.61865-6.26262c.09111-.36213.15647-.62217.24758-.9843q-.0489-.11821-.09837-.23628a9.70311,9.70311,0,0,0-17.89849.06652c-2.92739,7.05051-6.65447,14.11307-7.57216,21.5678a28.7054,28.7054,0,0,0,.5039,9.87234,115.08614,115.08614,0,0,1-10.46893-47.79893,111.07991,111.07991,0,0,1,.689-12.392q.5708-5.05966,1.58377-10.0473a116.4192,116.4192,0,0,1,23.087-49.34152,30.9826,30.9826,0,0,0,12.88556-13.36893,23.6336,23.6336,0,0,0,2.14933-6.45821c-.62729.08228-1.26489.13369-1.89217.17479-.19543.01023-.40108.02055-.59651.03087l-.07369.0033a3.57989,3.57989,0,0,1-2.9401-5.83225q.40627-.5.813-.99948c.4114-.51423.833-1.01814,1.24434-1.53228a1.7836,1.7836,0,0,0,.13369-.15432c.47313-.58619.94609-1.16206,1.41922-1.74825a10.35176,10.35176,0,0,0-3.39367-3.28044c-4.74083-2.77661-11.28133-.85358-14.70586,3.43476-3.43476,4.28826-4.0826,10.30438-2.88976,15.66218a41.48513,41.48513,0,0,0,5.73842,12.793c-.25715.32912-.52454.64792-.78161.977a117.17121,117.17121,0,0,0-12.22973,19.37481,48.70929,48.70929,0,0,0-2.908-22.62447c-2.78346-6.71479-8.00064-12.37-12.595-18.17495-5.51857-6.97261-16.83488-3.9296-17.80713,4.90927q-.01412.12837-.02757.25665,1.02363.57749,2.004,1.22586a4.9011,4.9011,0,0,1-1.976,8.91908l-.09994.01543a48.7668,48.7668,0,0,0,1.28544,7.29124A50.20988,50.20988,0,0,0,799.56347,641.273c.40108.20565.79193.41131,1.193.60673a119.598,119.598,0,0,0-6.43767,30.296,113.43525,113.43525,0,0,0,.08228,18.31542l-.03086-.216a29.97408,29.97408,0,0,0-10.23241-17.3076c-7.87438-6.46853-18.9994-8.8505-27.49446-14.04994a5.62528,5.62528,0,0,0-8.61571,5.47252q.01708.11352.03474.227a32.92633,32.92633,0,0,1,3.69184,1.779q1.02362.57761,2.004,1.22585a4.90116,4.90116,0,0,1-1.976,8.91917l-.1.01535c-.072.01031-.13369.02063-.20557.03094a48.80758,48.80758,0,0,0,8.97767,14.05786A50.25446,50.25446,0,0,0,796.9,706.63672h.01032a119.56344,119.56344,0,0,0,8.03167,23.447h28.69167c.10291-.3188.19542-.64792.288-.96672a32.59925,32.59925,0,0,1-7.93916-.473c2.12878-2.61214,4.25747-5.24483,6.38625-7.85688a1.78139,1.78139,0,0,0,.1337-.15424c1.07978-1.33685,2.16987-2.66347,3.24965-4.00032l.00058-.00165a47.75027,47.75027,0,0,0-1.39916-12.16412Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #f2f2f2)" />
                                                            <path d="M723.86447,729.89617c-.08252,0-.165-.00195-.24756-.0039a8.169,8.169,0,0,1-7.70215-8.25488c0-12.79493-9.13965-20.25879-18.19726-21.9795-9.05762-1.71972-20.29785,1.8711-24.98926,13.77637l-4.26514,10.707a19.67152,19.67152,0,0,1-27.78662,0l-.25244-.252.15674-.32129,75.334-154.13379v-3.77734a19.488,19.488,0,0,1,.002-3.5l-.002-388.20313a7.94627,7.94627,0,0,1,8.19043-7.94287,8.16941,8.16941,0,0,1,7.70264,8.25488v387.936a19.489,19.489,0,0,1-.00195,3.5l.00195,3.73144,75.49072,154.45606-.25244.252a19.67152,19.67152,0,0,1-27.78662,0l-.11182-.16992-4.15332-10.53711c-4.6914-11.9043-15.93017-15.49316-24.98926-13.77637-9.05761,1.72071-18.19726,9.18457-18.19726,21.9795v.3125a7.94652,7.94652,0,0,1-7.94336,7.94628Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-400, #e6e6e6)" />
                                                            <path d="M861.76287,446.99292H585.95965A12.10626,12.10626,0,0,1,573.867,434.90063v-192.828A12.10611,12.10611,0,0,1,585.95965,229.98H861.76287a12.10626,12.10626,0,0,1,12.09229,12.09264v192.828A12.10641,12.10641,0,0,1,861.76287,446.99292Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #fff)" /><path d="M861.76291,448.49285H585.95968a13.60791,13.60791,0,0,1-13.59277-13.59179V242.07244a13.608,13.608,0,0,1,13.59277-13.59228H861.76291a13.60791,13.60791,0,0,1,13.59228,13.59228V434.90106A13.6078,13.6078,0,0,1,861.76291,448.49285ZM585.95968,231.48016a10.60442,10.60442,0,0,0-10.59277,10.59228V434.90106a10.60463,10.60463,0,0,0,10.59277,10.59179H861.76291a10.60421,10.60421,0,0,0,10.59228-10.59179V242.07244a10.604,10.604,0,0,0-10.59228-10.59228Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #f2f2f2)" />
                                                            <path d="M764.63979,242.0363H683.08263a19.52487,19.52487,0,0,1-19.5028-19.5028v-.35459H784.14258v.35459A19.52486,19.52486,0,0,1,764.63979,242.0363Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-400, #e6e6e6)" />
                                                            <path d="M764.99438,459.04925H683.43723a19.52509,19.52509,0,0,1-19.5028-19.5028v-.35459H784.49718v.35459A19.52509,19.52509,0,0,1,764.99438,459.04925Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-400, #e6e6e6)" />
                                                            <path d="M874.31485,730.88939a1.18647,1.18647,0,0,1-1.19006,1.19h-547.29a1.19,1.19,0,0,1,0-2.38h547.29A1.18651,1.18651,0,0,1,874.31485,730.88939Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-500, #ccc)" />
                                                            <polygon points="184.306 537.181 198.722 537.181 205.58 481.575 184.303 481.576 184.306 537.181" fill="#9e616a" />
                                                            <path d="M504.06863,696.07669l22.78907-1.3602v9.76383l21.6662,14.96345a6.09886,6.09886,0,0,1-3.46558,11.11765H517.92709l-4.67648-9.65792-1.82593,9.65792H501.19512Z" transform="translate(-324.64481 -166.00708)" fill="#2f2e41" />
                                                            <polygon points="135.277 227.892 133.865 234.622 132.664 259.447 180.908 252.915 184.613 224.169 179.492 215.755 135.277 227.892" fill="#9e616a" />
                                                            <polygon points="111.347 537.181 125.763 537.181 132.621 481.575 111.344 481.576 111.347 537.181" fill="#9e616a" />
                                                            <path d="M428.1707,604.94848l-.00054-.14891,5.39635-25.192,3.32751-12.54128-9.24939-73.42936c-2.17782-53.34848,28.7723-78.9931,29.01588-79.24519l.67116-.69775,49.63579-1.2147c26.70628,16.00123,23.683,103.51941,28.57341,163.039.34872,4.24414,4.73124,10.50859,3.654,14.54583-8.54582,32.02677-6.04255,66.6612-12.553,67.685l-19.96125-.27744-10.30939-46.78874,9.51636-35.68634c-4.22057-.77752-7.13727-21.41179-7.13727-21.41179-1.83905-2.18368-8.1881-20.75593-8.1881-20.75593l-8.46552-51.40977-13.601,88.42417,3.27551,20.74438-2.71071,7.13285-11.60823,58.88563-.12339.94878L435.44348,655.37Z" transform="translate(-324.64481 -166.00708)" fill="#2f2e41" />
                                                            <path d="M431.10991,696.07669l22.78906-1.3602v9.76383l21.6662,14.96345a6.09886,6.09886,0,0,1-3.46557,11.11765H444.96836l-4.67648-9.65792-1.82593,9.65792H428.23639Z" transform="translate(-324.64481 -166.00708)" fill="#2f2e41" />
                                                            <path d="M499.72323,296.81336l12.16793,13.51992,14.61521,27.54745-7.17925,33.96819,3.13895,15.93971,4.635,17.52209c-17.8595,9.87926-39.074-3.76443-58.5635-9.82419l-19.176,8.4722,1.014-23.32186.52-58.76042a16.46939,16.46939,0,0,1,17.73187-16.27514h0l12.84392-9.464Z" transform="translate(-324.64481 -166.00708)" fill="var(--accent-brand-400, #6c63ff)" />
                                                            <circle cx="171.67023" cy="98.07194" r="25.65727" fill="#9e616a" /><path d="M526.50637,254.81959c-.452,2.51394-11.2531,3.72725-10.928-.74545-2.10149,4.211-5.24175,10.322-1.24175,17.322a10.98281,10.98281,0,0,0-1.48157,12.81309,33.15262,33.15262,0,0,1,2.847,5.84463,8.87535,8.87535,0,0,1,.32512,1.51466,2.89763,2.89763,0,0,1-4.12372,2.97386c-10.88039-5.32913-29.85434-4.42589-41.75772-1.17444q.119-3.47344-.09516-6.93107a17.13363,17.13363,0,0,1-3.37832,7.91442c-2.03809.60271-4.03649,1.22919-5.97148,1.84777a1.71539,1.71539,0,0,1-2.18084-2.09361,9.64658,9.64658,0,0,0,.2062-4.203c-.49172-2.90252-1.95087-5.52745-2.9818-8.27924s-1.61781-5.916-.35687-8.57264c1.95876-4.12377,7.47826-5.38471,9.91287-9.24676,2.736-4.33784.61065-9.99215,1.03886-15.1072.60271-7.23243,6.52662-13.10875,13.204-15.94781,11.56233-4.9168,26.02719-.935,34.695,8.15314a7.93768,7.93768,0,0,1,8.303-.35687c2.56152,1.37192,4.4013,2.08567,5.5512,4.75817C529.09959,247.65062,526.96634,252.29776,526.50637,254.81959Z" transform="translate(-324.64481 -166.00708)" fill="#2f2e41" />
                                                            <path d="M515.48591,556.53986l-60.36453-60.36452a3.7472,3.7472,0,0,1-.00008-5.29331l42.20391-42.20391a3.74715,3.74715,0,0,1,5.29338,0l60.36453,60.36453a3.7472,3.7472,0,0,1-.00008,5.29331l-42.2039,42.2039A3.74724,3.74724,0,0,1,515.48591,556.53986Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-300, #fff)" />
                                                            <path d="M518.13254,558.63348a4.71009,4.71009,0,0,1-3.35352-1.38672L454.41427,496.8825a4.74593,4.74593,0,0,1,0-6.707l42.20411-42.2041a4.74649,4.74649,0,0,1,6.70752,0l60.36425,60.36426a4.7459,4.7459,0,0,1,0,6.707l-42.2041,42.2041A4.71009,4.71009,0,0,1,518.13254,558.63348ZM499.97189,448.58367a2.71951,2.71951,0,0,0-1.939.80176l-42.20459,42.2041a2.74665,2.74665,0,0,0,0,3.87891l60.36474,60.36426a2.81453,2.81453,0,0,0,3.87891,0l42.2041-42.2041a2.74665,2.74665,0,0,0,0-3.87891l-60.36475-60.36426A2.72144,2.72144,0,0,0,499.97189,448.58367Z" transform="translate(-324.64481 -166.00708)" fill="var(--primary-background-400, #e6e6e6)" />
                                                            <path d="M492.74166,454.293a11.22642,11.22642,0,0,1,3.595-16.83486l.94985-100.813,18.84219,8.64691-4.1444,97.50067A11.2873,11.2873,0,0,1,492.74166,454.293Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M493.24918,311.12137s18.3293-8.89112,20.86419,7.88369,12.96145,60.43336,12.96145,60.43336l-31.63926-2.23768Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M492.74166,454.293a11.22642,11.22642,0,0,1,3.595-16.83486l.94985-100.813,18.84219,8.64691-4.1444,97.50067A11.2873,11.2873,0,0,1,492.74166,454.293Z" transform="translate(-324.64481 -166.00708)" fill="#9e616a" />
                                                            <path d="M493.24918,311.12137s18.3293-8.89112,20.86419,7.88369,12.96145,60.43336,12.96145,60.43336l-31.63926-2.23768Z" transform="translate(-324.64481 -166.00708)" fill="var(--accent-brand-400, #6c63ff)" />
                                                        </svg>
                                                    </EmptyMedia>
                                                </EmptyHeader>
                                                <EmptyContent>
                                                    <EmptyTitle>Lista este goală pentru moment</EmptyTitle>
                                                    <EmptyDescription>Nu ai adăugat încă nici-o disciplina. Creează prima disciplina pentru a începe organizarea.</EmptyDescription>
                                                    <AdminOnlyServer>
                                                        <CreateGroupModal trigger={
                                                            <Button variant="brand" size="L">
                                                                <CirclePlus className="size-4" />
                                                                Crează grupă
                                                            </Button>
                                                        } learningTypes={learningTypes} />
                                                    </AdminOnlyServer>

                                                </EmptyContent>
                                            </Empty>
                                        ) : (
                                            <ul className="grid grid-cols-[repeat(auto-fill,minmax(320px,1fr))] auto-rows-min gap-6 w-full mb-6">
                                                {
                                                    filteredGroups.map((group) => (
                                                        <li key={group.id}>
                                                            <Card className="bg-primary-100 hover:bg-brand-400/20 hover:border-brand-400 transition-colors relative overflow-hidden h-full">
                                                                <CardHeader className="flex flex-row items-start justify-between space-y-0 pb-2">
                                                                    <CardTitle className="text-lg font-semibold">
                                                                        {group.name}
                                                                    </CardTitle>
                                                                    <AdminOnlyServer>
                                                                        <CardActions groupId={group.id} />
                                                                    </AdminOnlyServer>
                                                                </CardHeader>
                                                                <CardContent>
                                                                    <div className="flex gap-6 text-sm text-gray-600">
                                                                        <span className="text-sm">An: {group.studyYear.year}</span>
                                                                        <span className="text-sm">Semester: {group.semester}</span>
                                                                        <span className="text-sm">Grupa: {group.group}</span>
                                                                    </div>
                                                                </CardContent>
                                                            </Card>
                                                        </li>
                                                    ))
                                                }
                                                <AdminOnlyServer>
                                                    <li key="year-create" className="min-h-[98px]">
                                                        <CreateGroupModal trigger={
                                                            <Card className="bg-primary-100 h-full p-4 hover:bg-brand-400/20 hover:border-brand-400 transition-colors cursor-pointer">
                                                                <CardContent className="h-full flex items-center justify-center p-0">
                                                                    <Button className="flex-col py-4 px-6 w-full h-full text-base" variant="text" size="L">
                                                                        <CirclePlus className="size-6" /> Crează grupă
                                                                    </Button>
                                                                </CardContent>
                                                            </Card>
                                                        } learningTypes={learningTypes} />
                                                    </li>
                                                </AdminOnlyServer>
                                            </ul>
                                        )
                                    }
                                </>

                            )}
                        </Suspense>
                    </div>
                </div>
            </div>
        </div>
    )
}